pipeline {
    agent {
        docker {
            image 'alpine' // lightweight image to test with
        }
    }
    stages {
        stage('Check Docker Agent') {
            steps {
                script {
                    echo 'Checking Docker functionality...'
                    sh 'echo "Docker version:"'
                    sh 'docker --version || echo "Docker not available inside container"'
                    sh 'echo "Running hello-world container..."'
                    sh 'docker run hello-world || echo "Failed to run hello-world"'
                }
            }
        }
    }
}
